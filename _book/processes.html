<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Processes | Introduction to Nextflow</title>
  <meta name="description" content="This is a short tutorial about Nextflow." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Processes | Introduction to Nextflow" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a short tutorial about Nextflow." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Processes | Introduction to Nextflow" />
  
  <meta name="twitter:description" content="This is a short tutorial about Nextflow." />
  



<meta name="date" content="2024-04-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="channels.html"/>
<link rel="next" href="workflow.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>

<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

   if(!this.className.includes("nohide"))
   {
       // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);
    console.log(this.className)
    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide the code! I am good to go!' : 'Show me the code! Need help!') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Show me the code! Need help!');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide the code! I am good to go!');
    });
   }
  
  });

}
</script>
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
.row { display: flex; }
.collapse { display: none; }
.in { display:block }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Nextflow</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#setting-up-the-environment"><i class="fa fa-check"></i><b>1.1</b> Setting up the environment</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-concepts.html"><a href="basic-concepts.html"><i class="fa fa-check"></i><b>2</b> Basic concepts</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-concepts.html"><a href="basic-concepts.html#nextflow-scripting"><i class="fa fa-check"></i><b>2.1</b> Nextflow scripting</a></li>
<li class="chapter" data-level="2.2" data-path="basic-concepts.html"><a href="basic-concepts.html#processes-and-channels"><i class="fa fa-check"></i><b>2.2</b> Processes and channels</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="channels.html"><a href="channels.html"><i class="fa fa-check"></i><b>3</b> Channels</a>
<ul>
<li class="chapter" data-level="3.1" data-path="channels.html"><a href="channels.html#of"><i class="fa fa-check"></i><b>3.1</b> of</a></li>
<li class="chapter" data-level="3.2" data-path="channels.html"><a href="channels.html#frompath"><i class="fa fa-check"></i><b>3.2</b> fromPath</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="processes.html"><a href="processes.html"><i class="fa fa-check"></i><b>4</b> Processes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="processes.html"><a href="processes.html#scriptshellexec"><i class="fa fa-check"></i><b>4.1</b> script|shell|exec</a></li>
<li class="chapter" data-level="4.2" data-path="processes.html"><a href="processes.html#input"><i class="fa fa-check"></i><b>4.2</b> input</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="processes.html"><a href="processes.html#input-each"><i class="fa fa-check"></i><b>4.2.1</b> input each</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="processes.html"><a href="processes.html#output"><i class="fa fa-check"></i><b>4.3</b> Output</a></li>
<li class="chapter" data-level="4.4" data-path="processes.html"><a href="processes.html#directives"><i class="fa fa-check"></i><b>4.4</b> Directives</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="processes.html"><a href="processes.html#publishdir"><i class="fa fa-check"></i><b>4.4.1</b> publishDir</a></li>
<li class="chapter" data-level="4.4.2" data-path="processes.html"><a href="processes.html#tag"><i class="fa fa-check"></i><b>4.4.2</b> tag</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> Workflow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflow.html"><a href="workflow.html#subworkflows"><i class="fa fa-check"></i><b>5.1</b> Subworkflows</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="operators.html"><a href="operators.html"><i class="fa fa-check"></i><b>6</b> Operators</a>
<ul>
<li class="chapter" data-level="6.1" data-path="operators.html"><a href="operators.html#collect"><i class="fa fa-check"></i><b>6.1</b> Collect</a></li>
<li class="chapter" data-level="6.2" data-path="operators.html"><a href="operators.html#flatten"><i class="fa fa-check"></i><b>6.2</b> flatten</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="configuration-file.html"><a href="configuration-file.html"><i class="fa fa-check"></i><b>7</b> Configuration file</a>
<ul>
<li class="chapter" data-level="7.1" data-path="configuration-file.html"><a href="configuration-file.html#config-scopes"><i class="fa fa-check"></i><b>7.1</b> Config scopes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="configuration-file.html"><a href="configuration-file.html#scope-params"><i class="fa fa-check"></i><b>7.1.1</b> Scope params</a></li>
<li class="chapter" data-level="7.1.2" data-path="configuration-file.html"><a href="configuration-file.html#scope-process"><i class="fa fa-check"></i><b>7.1.2</b> Scope process</a></li>
<li class="chapter" data-level="7.1.3" data-path="configuration-file.html"><a href="configuration-file.html#scope-executor"><i class="fa fa-check"></i><b>7.1.3</b> Scope executor</a></li>
<li class="chapter" data-level="7.1.4" data-path="configuration-file.html"><a href="configuration-file.html#configuration-on-uppmax"><i class="fa fa-check"></i><b>7.1.4</b> Configuration on UPPMAX</a></li>
<li class="chapter" data-level="7.1.5" data-path="configuration-file.html"><a href="configuration-file.html#containers"><i class="fa fa-check"></i><b>7.1.5</b> Containers</a></li>
<li class="chapter" data-level="7.1.6" data-path="configuration-file.html"><a href="configuration-file.html#config-profiles"><i class="fa fa-check"></i><b>7.1.6</b> Config profiles</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="more-examples.html"><a href="more-examples.html"><i class="fa fa-check"></i><b>8</b> More examples:</a>
<ul>
<li class="chapter" data-level="8.1" data-path="more-examples.html"><a href="more-examples.html#two-processes"><i class="fa fa-check"></i><b>8.1</b> Two processes</a></li>
<li class="chapter" data-level="8.2" data-path="more-examples.html"><a href="more-examples.html#two-processes-including-collect"><i class="fa fa-check"></i><b>8.2</b> Two processes including collect</a></li>
<li class="chapter" data-level="8.3" data-path="more-examples.html"><a href="more-examples.html#two-processes-collect-accept-parameters-from-the-user"><i class="fa fa-check"></i><b>8.3</b> Two processes, collect, accept parameters from the user</a></li>
<li class="chapter" data-level="8.4" data-path="more-examples.html"><a href="more-examples.html#three-processes"><i class="fa fa-check"></i><b>8.4</b> Three processes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="resuming-the-pipeline-command-line-interface.html"><a href="resuming-the-pipeline-command-line-interface.html"><i class="fa fa-check"></i><b>9</b> Resuming the pipeline (Command line interface)</a></li>
<li class="chapter" data-level="10" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html"><i class="fa fa-check"></i><b>10</b> Assignment 2: Nextflow</a>
<ul>
<li class="chapter" data-level="10.1" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html#set-up-the-environment"><i class="fa fa-check"></i><b>10.1</b> Set up the environment</a></li>
<li class="chapter" data-level="10.2" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html#part-1"><i class="fa fa-check"></i><b>10.2</b> Part 1</a></li>
<li class="chapter" data-level="10.3" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html#part-2"><i class="fa fa-check"></i><b>10.3</b> Part 2</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html#part-2.1-build-an-openms-pipeline"><i class="fa fa-check"></i><b>10.3.1</b> Part 2.1 (Build an OpenMS pipeline)</a></li>
<li class="chapter" data-level="10.3.2" data-path="assignment-2-nextflow.html"><a href="assignment-2-nextflow.html#part-2.2-optional-gives-extra-points"><i class="fa fa-check"></i><b>10.3.2</b> Part 2.2 (optional, gives extra points)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li>Akshai Parakkal Sreenivasan ( <li><a href="https://caramba.clinic/">Caramba lab</a></li>)</li>
<li>Payam Emami ( <li><a href="https://www.nbis.se/">National Bioinformatics Infrastructure Sweden</a></li>)</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Nextflow</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="processes" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Processes<a href="processes.html#processes" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In Nextflow a process is the basic processing primitive to execute a user script. As said before, this processes can pretty much run anything from R scripts to complex bash commands. Anything that is executable on the linux system can be run!</p>
<p>The process definition starts with keyword the process, followed by process name and finally the process body delimited by curly brackets. The process body must contain a string which represents the command or, more generally, a script that is executed by it.</p>
<p>The overall structure of a process in Nextflow looks like this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r nohide numberLines"><code class="sourceCode r"><span id="cb16-1"><a href="processes.html#cb16-1"></a>process <span class="sc">&lt;</span> name <span class="sc">&gt;</span> {</span>
<span id="cb16-2"><a href="processes.html#cb16-2"></a></span>
<span id="cb16-3"><a href="processes.html#cb16-3"></a>   [ directives ] <span class="co">#1</span></span>
<span id="cb16-4"><a href="processes.html#cb16-4"></a></span>
<span id="cb16-5"><a href="processes.html#cb16-5"></a>   input<span class="sc">:</span></span>
<span id="cb16-6"><a href="processes.html#cb16-6"></a>    <span class="er">&lt;</span> process inputs <span class="sc">&gt;</span> <span class="co">#2</span></span>
<span id="cb16-7"><a href="processes.html#cb16-7"></a></span>
<span id="cb16-8"><a href="processes.html#cb16-8"></a>   output<span class="sc">:</span></span>
<span id="cb16-9"><a href="processes.html#cb16-9"></a>    <span class="er">&lt;</span> process outputs <span class="sc">&gt;</span> <span class="co">#3</span></span>
<span id="cb16-10"><a href="processes.html#cb16-10"></a></span>
<span id="cb16-11"><a href="processes.html#cb16-11"></a>   when<span class="sc">:</span></span>
<span id="cb16-12"><a href="processes.html#cb16-12"></a>    <span class="er">&lt;</span> condition <span class="sc">&gt;</span> <span class="co">#4</span></span>
<span id="cb16-13"><a href="processes.html#cb16-13"></a></span>
<span id="cb16-14"><a href="processes.html#cb16-14"></a>   [script<span class="sc">|</span>shell<span class="sc">|</span>exec]<span class="sc">:</span></span>
<span id="cb16-15"><a href="processes.html#cb16-15"></a>   <span class="er">&lt;</span> user script to be executed <span class="sc">&gt;</span> <span class="co">#5</span></span>
<span id="cb16-16"><a href="processes.html#cb16-16"></a></span>
<span id="cb16-17"><a href="processes.html#cb16-17"></a>}</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Using the directive declarations block you can provide optional settings that will affect the execution of the current process</li>
<li>The input block defines from which channels the process expects to receive data.</li>
<li>The output declaration block allows you send out the results produced to the channels.</li>
<li>The <code>when</code> declaration allows you to define a condition that must be verified in order to execute the process.</li>
<li>The script block is a string statement that defines the command that is executed by the process to carry out its task.</li>
</ol>
<div id="scriptshellexec" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> script|shell|exec<a href="processes.html#scriptshellexec" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We start with the <code>script</code> block. A process contains one and only one script block, and it must be the last statement when the process contains input and output declarations. The entered string is executed as a Bash script in the host system. It can be any command, script or combination of them, that you would normally use in terminal shell or in a common Bash script. The script block can be a simple string or multi-line string. The latter simplifies the writing of non trivial scripts composed by multiple commands spanning over multiple lines. If you would like to run shell instead of bash you can use single quotation (<code>'''</code>) instead of double.</p>
<p>For example,</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb17-1"><a href="processes.html#cb17-1"></a><span class="va">db</span><span class="op">=</span><span class="st">&#39;database&#39;</span> <span class="co">#1</span></span>
<span id="cb17-2"><a href="processes.html#cb17-2"></a></span>
<span id="cb17-3"><a href="processes.html#cb17-3"></a><span class="ex">process</span> justdebugBash {</span>
<span id="cb17-4"><a href="processes.html#cb17-4"></a><span class="ex">debug</span> true <span class="co">#2</span></span>
<span id="cb17-5"><a href="processes.html#cb17-5"></a> <span class="ex">script:</span></span>
<span id="cb17-6"><a href="processes.html#cb17-6"></a> <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb17-7"><a href="processes.html#cb17-7"></a><span class="st"> echo </span><span class="va">$db</span><span class="st"> #3</span></span>
<span id="cb17-8"><a href="processes.html#cb17-8"></a><span class="st"> &quot;&quot;&quot;</span></span>
<span id="cb17-9"><a href="processes.html#cb17-9"></a></span>
<span id="cb17-10"><a href="processes.html#cb17-10"></a><span class="er">}</span></span>
<span id="cb17-11"><a href="processes.html#cb17-11"></a></span>
<span id="cb17-12"><a href="processes.html#cb17-12"></a><span class="ex">process</span> justEchoShell {</span>
<span id="cb17-13"><a href="processes.html#cb17-13"></a><span class="ex">debug</span> true</span>
<span id="cb17-14"><a href="processes.html#cb17-14"></a>   <span class="ex">shell:</span></span>
<span id="cb17-15"><a href="processes.html#cb17-15"></a>   <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb17-16"><a href="processes.html#cb17-16"></a><span class="st">   echo !{db} #4</span></span>
<span id="cb17-17"><a href="processes.html#cb17-17"></a><span class="st">   &#39;&#39;&#39;</span></span>
<span id="cb17-18"><a href="processes.html#cb17-18"></a><span class="er">}</span></span>
<span id="cb17-19"><a href="processes.html#cb17-19"></a></span>
<span id="cb17-20"><a href="processes.html#cb17-20"></a><span class="ex">workflow</span> {</span>
<span id="cb17-21"><a href="processes.html#cb17-21"></a>    <span class="fu">justEchoBash()</span></span>
<span id="cb17-22"><a href="processes.html#cb17-22"></a>    <span class="fu">justEchoShell()</span></span>
<span id="cb17-23"><a href="processes.html#cb17-23"></a><span class="er">}</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Creates a variable and assign it to <code>database</code>.</li>
<li>This is a directive that is setting the process to print the standard output. More on this later!</li>
<li>Runs the bash command <code>echo</code> which prints the content of variable <code>db</code>. Note that the variables that you define outside of the process script can be accessed using <code>$</code> sign</li>
<li>This is identical to bash but using shell. To access the variable <code>db</code> we need to wrap in <code>!{}</code></li>
</ol>
<p>Please note that unless really needed try to use <code>bash</code>.</p>
<p>Create a file called <code>main_4.nf</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb18-1"><a href="processes.html#cb18-1"></a><span class="fu">nano</span> main_4.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb19-1"><a href="processes.html#cb19-1"></a><span class="ex">nextflow</span> main_4.nf</span></code></pre></div>
</div>
<div id="input" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> input<a href="processes.html#input" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The input block defines from which channels the process expects to receive data. You can only define one input block at a time and it must contain one or more input declarations.</p>
<p>The input block follows the syntax shown below:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb20-1"><a href="processes.html#cb20-1"></a><span class="ex">input:</span></span>
<span id="cb20-2"><a href="processes.html#cb20-2"></a>  <span class="op">&lt;</span>input <span class="ex">qualifier</span><span class="op">&gt;</span> <span class="op">&lt;</span>input name<span class="op">&gt;</span> </span></code></pre></div>
<p>An input definition starts with an input qualifier and then the input name.</p>
<p>The input qualifier declares the type of data to be received.</p>
<p>The qualifiers available are the ones listed in the following table:</p>
<table>
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead>
<tr class="header">
<th>Qualifier</th>
<th>Semantic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>val</td>
<td>Lets you access the received input value by its name in the process script.</td>
</tr>
<tr class="even">
<td>env</td>
<td>Lets you use the received value to set an environment variable named as the specified input name.</td>
</tr>
<tr class="odd">
<td>file</td>
<td>Lets you handle the received value as a file, staging it properly in the execution context.</td>
</tr>
<tr class="even">
<td>path</td>
<td>Lets you handle the received value as a path, staging the file properly in the execution context.</td>
</tr>
<tr class="odd">
<td>stdin</td>
<td>Lets you forward the received value to the process stdin special file.</td>
</tr>
<tr class="even">
<td>tuple</td>
<td>Lets you handle a group of input values having one of the above qualifiers.</td>
</tr>
<tr class="odd">
<td>each</td>
<td>Lets you execute the process for each entry in the input collection.</td>
</tr>
</tbody>
</table>
<p>For example, here we have a channel and a process that gets an input from the channel and prints the values.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb21-1"><a href="processes.html#cb21-1"></a><span class="ex">num</span> = Channel.from<span class="er">(</span> <span class="ex">1,</span> 2, 3 <span class="kw">)</span> <span class="co">#1</span></span>
<span id="cb21-2"><a href="processes.html#cb21-2"></a></span>
<span id="cb21-3"><a href="processes.html#cb21-3"></a><span class="ex">process</span> basicExample {</span>
<span id="cb21-4"><a href="processes.html#cb21-4"></a><span class="ex">debug</span> true</span>
<span id="cb21-5"><a href="processes.html#cb21-5"></a> <span class="ex">input:</span></span>
<span id="cb21-6"><a href="processes.html#cb21-6"></a> <span class="ex">val</span> x <span class="co">#2</span></span>
<span id="cb21-7"><a href="processes.html#cb21-7"></a> <span class="st">&quot;echo process job </span><span class="va">$x</span><span class="st">&quot;</span> <span class="co">#3</span></span>
<span id="cb21-8"><a href="processes.html#cb21-8"></a><span class="er">}</span></span>
<span id="cb21-9"><a href="processes.html#cb21-9"></a></span>
<span id="cb21-10"><a href="processes.html#cb21-10"></a><span class="ex">workflow</span> {           <span class="co">#4</span></span>
<span id="cb21-11"><a href="processes.html#cb21-11"></a>    <span class="ex">basicExample</span><span class="er">(</span><span class="ex">num</span><span class="kw">)</span></span>
<span id="cb21-12"><a href="processes.html#cb21-12"></a><span class="er">}</span></span></code></pre></div>
<p>Another way of writing the workflow when there is only one input. Here <code>num</code> is the only input channel.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb22-1"><a href="processes.html#cb22-1"></a></span>
<span id="cb22-2"><a href="processes.html#cb22-2"></a><span class="ex">workflow</span> {           <span class="co">#5</span></span>
<span id="cb22-3"><a href="processes.html#cb22-3"></a>    <span class="ex">num</span> <span class="kw">|</span> <span class="ex">basicExample</span></span>
<span id="cb22-4"><a href="processes.html#cb22-4"></a><span class="er">}</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Creates a channel of 1,2,3</li>
<li>Set the input of the process from the channel <code>num</code>. The type of the channel is <code>val</code>.</li>
<li>Runs a simple echo command that writes the value to std out! Remember that to access the input we need to use <code>$x</code>.</li>
<li>Executes the workflow containing the process basicExample with <code>num</code> as the input channel</li>
<li>When the process declares exactly one input, the pipe | operator can be used to provide inputs to the process, instead of passing it as a parameter. (similar to what you learned in Bash piping)</li>
</ol>
<p>In the above example the process is executed three times, each time a value is received from the channel num and used to process the script.</p>
<p>Create a file called <code>main_5.nf</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb23-1"><a href="processes.html#cb23-1"></a><span class="fu">nano</span> main_5.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb24-1"><a href="processes.html#cb24-1"></a><span class="ex">nextflow</span> main_5.nf</span></code></pre></div>
<p>Can you create a workflow that reads all the files with <code>*.mzML</code> extension in a file channel and print their name in a process? Remember, this is a file channel!</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><span id="cb25-1"><a href="processes.html#cb25-1"></a><span class="ex">mzMLFiles</span> = Channel.fromPath<span class="er">(</span> <span class="st">&#39;/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML&#39;</span> <span class="kw">)</span></span>
<span id="cb25-2"><a href="processes.html#cb25-2"></a></span>
<span id="cb25-3"><a href="processes.html#cb25-3"></a><span class="ex">process</span> featureFinder {</span>
<span id="cb25-4"><a href="processes.html#cb25-4"></a><span class="ex">debug</span> true</span>
<span id="cb25-5"><a href="processes.html#cb25-5"></a> <span class="ex">input:</span></span>
<span id="cb25-6"><a href="processes.html#cb25-6"></a> <span class="fu">file</span> mzML</span>
<span id="cb25-7"><a href="processes.html#cb25-7"></a></span>
<span id="cb25-8"><a href="processes.html#cb25-8"></a> <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb25-9"><a href="processes.html#cb25-9"></a><span class="st">echo i’m processing </span><span class="va">$mzML</span><span class="st"> file!</span></span>
<span id="cb25-10"><a href="processes.html#cb25-10"></a><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb25-11"><a href="processes.html#cb25-11"></a><span class="er">}</span></span>
<span id="cb25-12"><a href="processes.html#cb25-12"></a></span>
<span id="cb25-13"><a href="processes.html#cb25-13"></a><span class="ex">workflow</span> {</span>
<span id="cb25-14"><a href="processes.html#cb25-14"></a>    <span class="ex">featureFinder</span><span class="er">(</span><span class="ex">mzMLFiles</span><span class="kw">)</span></span>
<span id="cb25-15"><a href="processes.html#cb25-15"></a><span class="er">}</span></span></code></pre></div>
<p>Create a file called <code>main_6.nf</code> and put write the code.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb26-1"><a href="processes.html#cb26-1"></a><span class="fu">nano</span> main_6.nf</span></code></pre></div>
<p>Save the file (Ctrl+o enter) and exit (Ctrl+x). Now run</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb27-1"><a href="processes.html#cb27-1"></a><span class="ex">nextflow</span> main_6.nf</span></code></pre></div>
<div id="input-each" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> input each<a href="processes.html#input-each" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The each qualifier allows you to repeat the execution of a process for each item in a collection, every time a new data is received.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb28-1"><a href="processes.html#cb28-1"></a><span class="ex">mzMLFiles</span> = Channel.fromPath<span class="er">(</span> <span class="st">&#39;/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML&#39;</span> <span class="kw">)</span> <span class="co">#1</span></span>
<span id="cb28-2"><a href="processes.html#cb28-2"></a><span class="ex">num</span> = Channel.from<span class="er">(</span> <span class="ex">1,</span> 2, 3 <span class="kw">)</span> <span class="co">#2</span></span>
<span id="cb28-3"><a href="processes.html#cb28-3"></a><span class="ex">process</span> featureFinder {</span>
<span id="cb28-4"><a href="processes.html#cb28-4"></a>  <span class="ex">debug</span> true</span>
<span id="cb28-5"><a href="processes.html#cb28-5"></a><span class="ex">input:</span></span>
<span id="cb28-6"><a href="processes.html#cb28-6"></a><span class="ex">each</span> x  <span class="co">#3</span></span>
<span id="cb28-7"><a href="processes.html#cb28-7"></a><span class="fu">file</span> y  <span class="co">#4</span></span>
<span id="cb28-8"><a href="processes.html#cb28-8"></a></span>
<span id="cb28-9"><a href="processes.html#cb28-9"></a><span class="st">&quot;echo value </span><span class="va">$x</span><span class="st"> file </span><span class="va">$y</span><span class="st">&quot;</span> <span class="co">#5</span></span>
<span id="cb28-10"><a href="processes.html#cb28-10"></a></span>
<span id="cb28-11"><a href="processes.html#cb28-11"></a><span class="er">}</span></span>
<span id="cb28-12"><a href="processes.html#cb28-12"></a></span>
<span id="cb28-13"><a href="processes.html#cb28-13"></a><span class="ex">workflow</span> {</span>
<span id="cb28-14"><a href="processes.html#cb28-14"></a>    <span class="ex">featureFinder</span><span class="er">(</span><span class="ex">num,mzMLFiles</span><span class="kw">)</span> <span class="co">#6</span></span>
<span id="cb28-15"><a href="processes.html#cb28-15"></a><span class="er">}</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Creates a file channel from all <code>mzML</code> files in <code>/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML'</code>.</li>
<li>Create a channel containing numbers</li>
<li>Define input repeater for the values in the channel</li>
<li>Define another input channel from the file channel</li>
<li>Script that is executed</li>
<li>Workflow with the process featureFinder receving channels <code>num</code> and <code>mzMLFiles</code>. The order of the input has to be maintained to the order in which the <code>input</code> is written in the process. Here <code>x</code> receives value from <code>num</code> and <code>y</code> receives value from <code>mzMLFiles</code>.</li>
</ol>
<p>In the above example every time a file (<code>y</code>) of <code>mzML</code> is received as input by the process, it executes three tasks running a <code>echo</code> with a different value for the x parameter. This is useful when you need to repeat the same task for a given set of parameters.</p>
<p>Create a file called <code>main_7.nf</code></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb29-1"><a href="processes.html#cb29-1"></a><span class="fu">nano</span> main_7.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb30-1"><a href="processes.html#cb30-1"></a><span class="ex">nextflow</span> main_7.nf</span></code></pre></div>
</div>
</div>
<div id="output" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Output<a href="processes.html#output" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The output declaration block allows you to define the channels used by the process to send out the results produced. You can only define one output block at a time and it must contain one or more output declarations.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb31-1"><a href="processes.html#cb31-1"></a><span class="ex">output:</span></span>
<span id="cb31-2"><a href="processes.html#cb31-2"></a><span class="op">&lt;</span>output <span class="ex">qualifier</span><span class="op">&gt;</span> <span class="op">&lt;</span>output name<span class="op">&gt;</span> [, <span class="op">&lt;</span>option<span class="op">&gt;</span>: <span class="op">&lt;</span>option value<span class="op">&gt;</span>]</span></code></pre></div>
<p>The qualifiers that can be used in the output declaration block are the ones listed in the following table:</p>
<table>
<colgroup>
<col width="9%" />
<col width="90%" />
</colgroup>
<thead>
<tr class="header">
<th>Qualifier</th>
<th>Semantic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>val</td>
<td>Sends variables with the name specified over the output channel.</td>
</tr>
<tr class="even">
<td>file</td>
<td>Sends a file produced by the process with the name specified over the output channel.</td>
</tr>
<tr class="odd">
<td>path</td>
<td>Sends a file produced by the process with the name specified over the output channel (replaces file).</td>
</tr>
<tr class="even">
<td>env</td>
<td>Sends the variable defined in the process environment with the name specified over the output channel.</td>
</tr>
<tr class="odd">
<td>stdout</td>
<td>Sends the executed process stdout over the output channel.</td>
</tr>
<tr class="even">
<td>tuple</td>
<td>Sends multiple values over the same output channel.</td>
</tr>
</tbody>
</table>
<p>For example,</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb32-1"><a href="processes.html#cb32-1"></a><span class="ex">mzMLFiles</span> = Channel.fromPath<span class="er">(</span> <span class="st">&#39;/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML&#39;</span> <span class="kw">)</span> <span class="co">#1</span></span>
<span id="cb32-2"><a href="processes.html#cb32-2"></a><span class="ex">process</span> featureFinder {</span>
<span id="cb32-3"><a href="processes.html#cb32-3"></a><span class="ex">input:</span></span>
<span id="cb32-4"><a href="processes.html#cb32-4"></a><span class="fu">file</span> x  <span class="co">#2</span></span>
<span id="cb32-5"><a href="processes.html#cb32-5"></a><span class="ex">output:</span></span>
<span id="cb32-6"><a href="processes.html#cb32-6"></a><span class="fu">file</span> <span class="st">&quot;output/</span><span class="va">${x</span><span class="er">.baseName</span><span class="va">}</span><span class="st">.featureXML&quot;</span> <span class="co">#3</span></span>
<span id="cb32-7"><a href="processes.html#cb32-7"></a></span>
<span id="cb32-8"><a href="processes.html#cb32-8"></a><span class="st">&quot;&quot;&quot; </span></span>
<span id="cb32-9"><a href="processes.html#cb32-9"></a><span class="st">mkdir output </span></span>
<span id="cb32-10"><a href="processes.html#cb32-10"></a><span class="st">cp -in </span><span class="va">$x</span><span class="st"> output/</span><span class="va">${x</span><span class="er">.baseName</span><span class="va">}</span><span class="st">.featureXML </span></span>
<span id="cb32-11"><a href="processes.html#cb32-11"></a><span class="st">&quot;&quot;&quot;</span>  <span class="co">#4</span></span>
<span id="cb32-12"><a href="processes.html#cb32-12"></a><span class="er">}</span></span>
<span id="cb32-13"><a href="processes.html#cb32-13"></a></span>
<span id="cb32-14"><a href="processes.html#cb32-14"></a><span class="ex">workflow</span> {</span>
<span id="cb32-15"><a href="processes.html#cb32-15"></a>    <span class="ex">output_channel</span> = featureFinder<span class="er">(</span><span class="ex">mzMLFiles</span><span class="kw">)</span> <span class="co">#5</span></span>
<span id="cb32-16"><a href="processes.html#cb32-16"></a>    <span class="fu">output_channel.view()</span></span>
<span id="cb32-17"><a href="processes.html#cb32-17"></a><span class="er">}</span></span></code></pre></div>
<p>In the above example the process, when executed, it will create a file channel from <code>/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML</code>. The process will then get this channel as an input and creates an output channel <code>outputChannel</code> (named in the workflow) where each file extension has been changed to <code>featureXML</code>.</p>
<ol style="list-style-type: decimal">
<li>Creates a channel emitting files.</li>
<li>Receive value from the input channel.</li>
<li>Send data to output channel. The output file is located under <code>output</code> directory. <code>${x.baseName}</code> gives the name of the file without extension.</li>
<li>In the bash script, we first create an output folder We then copy the input to the output folder but change its extension. This is obviously a pretty useless command! But you can change this to a more meaningful one!</li>
<li>Sends the input channel to the process and receives the output from the process to a channel.</li>
</ol>
<p>Create a file called <code>main_8.nf</code></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb33-1"><a href="processes.html#cb33-1"></a><span class="fu">nano</span> main_8.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb34-1"><a href="processes.html#cb34-1"></a><span class="ex">nextflow</span> main_8.nf</span></code></pre></div>
<p>Let’s clean up the nextflow work directory now to free up some space</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb35-1"><a href="processes.html#cb35-1"></a><span class="ex">nextflow</span> clean <span class="at">-f</span></span></code></pre></div>
</div>
<div id="directives" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Directives<a href="processes.html#directives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using the directive declarations block you can provide optional settings that will affect the execution of the current process.</p>
<p>They must be entered at the top of the process body, before any other declaration blocks (i.e. input, output, etc) and have the following syntax:</p>
<p>You can see the complete list of directives <a href="https://www.nextflow.io/docs/latest/process.html#directives">here</a></p>
<div id="publishdir" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> publishDir<a href="processes.html#publishdir" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>publishDir</code> directive allows you to publish the process output files to a specified folder.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb36-1"><a href="processes.html#cb36-1"></a><span class="ex">process</span> foo {</span>
<span id="cb36-2"><a href="processes.html#cb36-2"></a></span>
<span id="cb36-3"><a href="processes.html#cb36-3"></a>    <span class="ex">publishDir</span> <span class="st">&#39;data/chunks&#39;</span> <span class="co">#1</span></span>
<span id="cb36-4"><a href="processes.html#cb36-4"></a></span>
<span id="cb36-5"><a href="processes.html#cb36-5"></a>    <span class="ex">output:</span></span>
<span id="cb36-6"><a href="processes.html#cb36-6"></a>    <span class="fu">file</span> <span class="st">&#39;chunk_*&#39;</span></span>
<span id="cb36-7"><a href="processes.html#cb36-7"></a></span>
<span id="cb36-8"><a href="processes.html#cb36-8"></a>    <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb36-9"><a href="processes.html#cb36-9"></a><span class="st">    printf &#39;</span><span class="ex">Hola</span><span class="st">&#39; | split -b 1 - chunk_</span></span>
<span id="cb36-10"><a href="processes.html#cb36-10"></a><span class="st">    &#39;&#39;&#39;</span></span>
<span id="cb36-11"><a href="processes.html#cb36-11"></a><span class="er">}</span></span>
<span id="cb36-12"><a href="processes.html#cb36-12"></a></span>
<span id="cb36-13"><a href="processes.html#cb36-13"></a><span class="ex">workflow</span> {</span>
<span id="cb36-14"><a href="processes.html#cb36-14"></a>    <span class="fu">foo()</span></span>
<span id="cb36-15"><a href="processes.html#cb36-15"></a><span class="er">}</span></span></code></pre></div>
<p>The above example splits the string Hola into file chunks of a single byte.</p>
<ol style="list-style-type: decimal">
<li>When complete the chunk_* output files are published into the /data/chunks folder.</li>
</ol>
<p><em>Can you create a workflow having a single process that just creates a text file (with whatever content) as an output and also publish its output to a directory?</em></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><span id="cb37-1"><a href="processes.html#cb37-1"></a><span class="ex">process</span> simpleOutput {</span>
<span id="cb37-2"><a href="processes.html#cb37-2"></a><span class="ex">publishDir</span> <span class="st">&#39;testOutput&#39;</span></span>
<span id="cb37-3"><a href="processes.html#cb37-3"></a><span class="ex">output:</span></span>
<span id="cb37-4"><a href="processes.html#cb37-4"></a><span class="fu">file</span> <span class="st">&quot;test.txt&quot;</span></span>
<span id="cb37-5"><a href="processes.html#cb37-5"></a><span class="st">&quot;echo test &gt;&gt; test.txt&quot;</span></span>
<span id="cb37-6"><a href="processes.html#cb37-6"></a></span>
<span id="cb37-7"><a href="processes.html#cb37-7"></a><span class="er">}</span></span>
<span id="cb37-8"><a href="processes.html#cb37-8"></a></span>
<span id="cb37-9"><a href="processes.html#cb37-9"></a><span class="ex">workflow</span> {</span>
<span id="cb37-10"><a href="processes.html#cb37-10"></a>    <span class="fu">simpleOutput()</span></span>
<span id="cb37-11"><a href="processes.html#cb37-11"></a><span class="er">}</span></span></code></pre></div>
<p>Create a file called <code>main_9.nf</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb38-1"><a href="processes.html#cb38-1"></a><span class="fu">nano</span> main_9.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb39-1"><a href="processes.html#cb39-1"></a><span class="ex">nextflow</span> main_9.nf</span></code></pre></div>
</div>
<div id="tag" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> tag<a href="processes.html#tag" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tag</code> directive allows you to associate each process execution with a custom label, so that it will be easier to identify them in the log file or in the trace execution report.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb40-1"><a href="processes.html#cb40-1"></a><span class="ex">mzMLFiles</span> = Channel.fromPath<span class="er">(</span> <span class="st">&#39;/crex/proj/uppmax2024-2-11/metabolomics/mzMLData/*.mzML&#39;</span> <span class="kw">)</span></span>
<span id="cb40-2"><a href="processes.html#cb40-2"></a><span class="ex">num</span> = Channel.from<span class="er">(</span> <span class="ex">1,</span> 2, 3 <span class="kw">)</span></span>
<span id="cb40-3"><a href="processes.html#cb40-3"></a><span class="ex">process</span> featureFinder {</span>
<span id="cb40-4"><a href="processes.html#cb40-4"></a><span class="ex">tag</span> <span class="st">&quot;</span><span class="va">$y</span><span class="st">&quot;</span> <span class="co">#1</span></span>
<span id="cb40-5"><a href="processes.html#cb40-5"></a><span class="ex">input:</span></span>
<span id="cb40-6"><a href="processes.html#cb40-6"></a><span class="ex">each</span> x</span>
<span id="cb40-7"><a href="processes.html#cb40-7"></a><span class="fu">file</span> y</span>
<span id="cb40-8"><a href="processes.html#cb40-8"></a></span>
<span id="cb40-9"><a href="processes.html#cb40-9"></a><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb40-10"><a href="processes.html#cb40-10"></a><span class="st">echo value </span><span class="va">$x</span><span class="st"> file </span><span class="va">$y</span></span>
<span id="cb40-11"><a href="processes.html#cb40-11"></a><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb40-12"><a href="processes.html#cb40-12"></a></span>
<span id="cb40-13"><a href="processes.html#cb40-13"></a><span class="er">}</span></span>
<span id="cb40-14"><a href="processes.html#cb40-14"></a></span>
<span id="cb40-15"><a href="processes.html#cb40-15"></a><span class="ex">workflow</span> {</span>
<span id="cb40-16"><a href="processes.html#cb40-16"></a>    <span class="ex">featureFinder</span><span class="er">(</span><span class="ex">num,mzMLFiles</span><span class="kw">)</span></span>
<span id="cb40-17"><a href="processes.html#cb40-17"></a><span class="er">}</span></span></code></pre></div>
<p>In the above example, when a file is received by the process, it will show its name when running the process.</p>
<ol style="list-style-type: decimal">
<li><code>$y</code> in the tag, indicates that name of file from <code>mzMLFiles</code> should be used as tag.</li>
</ol>
<p>Create a file called <code>main_10.nf</code></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb41-1"><a href="processes.html#cb41-1"></a><span class="fu">nano</span> main_10.nf</span></code></pre></div>
<p>Copy the above code to it. Save the file <code>(Ctrl+o enter)</code> and exit <code>(Ctrl+x)</code>
Now run</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb42-1"><a href="processes.html#cb42-1"></a><span class="ex">nextflow</span> main_10.nf</span></code></pre></div>
<p>What do you see? What is the difference to a process without a tag?</p>
<p>Now let’s clean up the cache produced by Nextflow using the clean command</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource bash nohide numberLines"><code class="sourceCode bash"><span id="cb43-1"><a href="processes.html#cb43-1"></a><span class="ex">nextflow</span> clean <span class="at">-f</span></span></code></pre></div>
<p>This removes all the cache files and saves space on the disk.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="channels.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="workflow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
